<?php ini_set('display_errors', 0);@header("content-Type: text/html; charset=utf-8");$valInt = isset($_POST['pInt']) ? $_POST['pInt'] : "点击测试";$valFloat = isset($_POST['pFloat']) ? $_POST['pFloat'] : "点击测试";$valIo = isset($_POST['pIo']) ? $_POST['pIo'] : "点击测试";if ($_GET['act'] == "phpinfo") {phpinfo();exit();}elseif($_POST['act'] == "整型测试"){$valInt = test_int();}elseif($_POST['act'] == "浮点测试"){$valFloat = test_float();} elseif($_POST['act'] == "IO测试")
{$valIo = test_io();}function test_int(){$timeStart = gettimeofday();for($i = 0; $i < 3000000; $i++){$t = 1+1;}$timeEnd = gettimeofday();$time = ($timeEnd["usec"]-$timeStart["usec"])/1000000+$timeEnd["sec"]-$timeStart["sec"];$time = round($time, 3)."秒";return $time;}function test_float(){$t = pi();$timeStart = gettimeofday();for($i = 0; $i < 3000000; $i++){sqrt($t);}$timeEnd = gettimeofday();$time = ($timeEnd["usec"]-$timeStart["usec"])/1000000+$timeEnd["sec"]-$timeStart["sec"];$time = round($time, 3)."秒";return $time;}function test_io(){$fp = @fopen(PHPSELF, "r");$timeStart = gettimeofday();for($i = 0; $i < 10000; $i++){@fread($fp, 10240);@rewind($fp);}$timeEnd = gettimeofday();@fclose($fp);$time = ($timeEnd["usec"]-$timeStart["usec"])/1000000+$timeEnd["sec"]-$timeStart["sec"];$time = round($time, 3)."秒";return($time);}?><form action="<?php echo $_SERVER[PHP_SELF]."#performancetesting";?>" method="post"><a name="w_performance"></a><a name="performancetesting"></a><table width="100%"cellpadding="5"cellspacing="1"><tr align="left"><th colspan="5">服务器性能检测</th></tr><tr align="center"><td width="19%"align="left">&nbsp;&nbsp;&nbsp;&nbsp;所参照的对象</td><td width="17%"><p>整数运算能力检测<br/>(1+1运算300万次)</p>
        <p><strong>整型测试</strong></p></td><td width="17%">浮点运算能力检测<br/>(圆周率开平方300万次) <p><strong>浮点测试</strong></p></td><td width="17%">数据I/O能力检测<br/>(读取10K文件1万次) <p><strong>I/O性能测试</strong></p></td></tr><tr align="center"><td align="left">&nbsp;&nbsp;&nbsp;&nbsp;香港<a target="_blank"href="http://www.vipfuwuqi.com/">vipfuwuqi.com</a></td><td>0.186秒</td><td>0.216秒</td><td>0.021秒</td></tr><tr align="center"><td align="left">&nbsp;&nbsp;&nbsp;&nbsp;台湾sina.com.tw</td><td>0.312秒</td><td>0.511秒</td><td>0.039秒</td></tr><tr align="center"><td align="left">&nbsp;&nbsp;&nbsp;&nbsp;美国backpackit.com</td><td>0.619秒</td><td>1.514秒</td><td>0.063秒</td></tr><tr align="center"><td align="left">&nbsp;&nbsp;&nbsp;&nbsp;韩国cjenm.com</td><td>0.312秒</td><td>0.921秒</td><td>0.036秒</td></tr><tr align="center"><td align="left">&nbsp;&nbsp;&nbsp;&nbsp;新加坡www.huaren.sg</td><td>0.296秒</td><td>0.761秒</td><td>0.023秒</td></tr><tr align="center"><td align="left">&nbsp;&nbsp;&nbsp;&nbsp;英国www.scotland.gov.uk</td><td>0.435秒</td><td>0.856秒</td><td>0.041秒</td></tr><tr align="center"><td align="left">&nbsp;&nbsp;&nbsp;&nbsp;当前服务器测试数据</td><td><span style="color:#FF5200"><strong><?php echo $valInt;?><strong/></span><br /><input type="image" name="act" src="phpwamp_info\1.png" value="整型测试"  /></td><td><span style="color:#FF5200"><strong><?php echo $valFloat;?><strong/></span><br /><input type="image" name="act" src="phpwamp_info\2.png" value="浮点测试" /></td><td><span style="color:#FF5200"><strong><?php echo $valIo;?><strong/></span><br /><input type="image" name="act" src="phpwamp_info\3.png" value="IO测试" /></td></tr></table><input type="hidden"name="pInt"value="<?php echo $valInt;?>" /><input type="hidden" name="pFloat" value="<?php echo $valFloat;?>" /><input type="hidden" name="pIo" value="<?php echo $valIo;?>" /></form>